"use strict";function _templateObject5(){var data=_taggedTemplateLiteral(["\n\t\twidth: 100%;\n\n\t\t\n\n\t\tth, td {\n\t\t\tborder: 1px solid #eee;\n\t\t\ttext-align: left;\n\t\t\twidth: 50%;\n\t\t\tpadding: 15px;\n\t\t}\n\n\t\tth {\n\t\t\twidth: 50%;\n\t\t\tfont-weight: bold;\n\t\t\ttext-align: right;\n\t\t}\n\t"]);_templateObject5=function _templateObject5(){return data;};return data;}
function _templateObject4(){var data=_taggedTemplateLiteral(["\n\t\t.signup-form__merch__item {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 1rem 0;\n\t\t\tbackground: #eee;\n\t\t\tpadding: 1.5rem;\n\n\t\t\t&-content {\n\t\t\t\twidth: 60%;\n\t\t\t\ttext-align: left;\n\n\t\t\t\tp {\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&-bg {\n\t\t\t\twidth: 35%;\n\t\t\t\tbackground-color: white;\n\t\t\t\tbackground-size: contain;\n\t\t\t\tflex: 1;\n\t\t\t\tmargin-left: 5%;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center center;\n\t\t\t}\n\t\t}\n\t\t.signup-form__merch__cart {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 0.5rem 0;\n\t\t\tpadding: 0.5rem 1rem;\n\t\t\tbackground: #eee;\n\n\t\t\t&-title {\n\t\t\t\tflex-grow: 1;\n\t\t\t\ttext-align: left;\n\t\t\t\talign-self: center;\n\t\t\t}\n\n\t\t\t&-price {\n\t\t\t\ttext-align: right;\n\t\t\t\talign-self: center;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\t.signup-form__merch--remove {\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\twidth: 100px;\n\t\t\t}\n\t\t}\n\t"]);_templateObject4=function _templateObject4(){return data;};return data;}
function _templateObject3(){var data=_taggedTemplateLiteral(["\n\t\tdisplay: flex !important;\n\t\tflex-wrap: wrap !important;\n\t\tpadding-left: 40px !important;\n\t\tpadding-right: 40px !important;\n\t\talignment: center !important;\n\t\ttext-align: center !important;\n\t\tpadding-bottom: 50px !important;\n\n\t\t.shave-text {\n\t\t\tflex: 40% !important;\n\t\t\tjustify-content: center !important;\n\t\t\tmargin-top: 150px !important;\n\t\t\ttext-align: center !important;\n\t\t}\n\n\t\t.shave-text-p {\n\t\t\ttext-align: -webkit-left !important;\n\t\t\tmax-width: 600px !important;\n\t\t\tfloat: right !important;\n\t\t}\n\n\t\t.shave-wheel {\n\t\t\tflex: 55% !important;\n\t\t}\n\n\t\tiframe {\n\t\t\twidth: 800px !important;\n\t\t\theight: 850px !important;\n\t\t}\n\n\t\t@media screen and (min-width: 1px) and (max-width: 1450px) {\n\t\t\t.shave-text, .shave-wheel {\n\t\t\t\tflex: 100% !important;\n\t\t\t}\n\n\t\t\t.shave-text {\n\t\t\t\tmargin-top: 0px !important;\n\t\t\t\tmargin-right: 10% !important;\n\t\t\t\tmargin-left: 10% !important;\n\t\t\t\ttext-align: center !important;\n\t\t\t}\n\n\t\t\t.shave-text-p {\n\t\t\t\tfloat: none !important;\n\t\t\t\twidth: 100% !important;\n\t\t\t\tmax-width: 100% !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\n\t\t\t.wrapper {\n\t\t\t\tpadding: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-width: 400px) {\n\t\t\tiframe {\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 425px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (min-width: 401px) and (max-width: 450px) {\n\t\t\tiframe {\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 485px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (min-width: 451px) and (max-width: 550px) {\n\t\t\tiframe {\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 535px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (min-width: 551px) and (max-width: 650px) {\n\t\t\tiframe {\n\t\t\t\twidth: 550px !important;\n\t\t\t\theight: 575px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (min-width: 651px) and (max-width: 750px) {\n\t\t\tiframe {\n\t\t\t\twidth: 650px !important;\n\t\t\t\theight: 700px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (min-width: 751px) and (max-width: 850px) {\n\t\t\tiframe {\n\t\t\t\twidth: 750px !important;\n\t\t\t\theight: 800px !important;\n\t\t\t}\n\n\t\t\t.shave-wheel {\n\t\t\t\tmargin-left: 0 !important;\n\t\t\t\tmargin-right: 0 !important;\n\t\t\t\tmin-width: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t@media screen and (-webkit-min-device-pixel-ratio:0) {\n\t\t\t#wheel-frame  { zoom: 1;  }\n\t\t}\n\t"]);_templateObject3=function _templateObject3(){return data;};return data;}
function _templateObject2(){var data=_taggedTemplateLiteral(["\n\t\t.signup-form__merch__item {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 1rem 0;\n\t\t\tbackground: #eee;\n\t\t\tpadding: 1.5rem;\n\n\t\t\t&-content {\n\t\t\t\twidth: 60%;\n\t\t\t\ttext-align: left;\n\n\t\t\t\tp {\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&-bg {\n\t\t\t\twidth: 35%;\n\t\t\t\tbackground-color: white;\n\t\t\t\tbackground-size: contain;\n\t\t\t\tflex: 1;\n\t\t\t\tmargin-left: 5%;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center center;\n\t\t\t}\n\t\t}\n\t\t.signup-form__merch__cart {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 0.5rem 0;\n\t\t\tpadding: 0.5rem 1rem;\n\t\t\tbackground: #eee;\n\n\t\t\t&-title {\n\t\t\t\tflex-grow: 1;\n\t\t\t\ttext-align: left;\n\t\t\t\talign-self: center;\n\t\t\t}\n\n\t\t\t&-price {\n\t\t\t\ttext-align: right;\n\t\t\t\talign-self: center;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\t.signup-form__merch--remove {\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\twidth: 100px;\n\t\t\t}\n\t\t}\n\t"]);_templateObject2=function _templateObject2(){return data;};return data;}
function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}
function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}
function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter);}
function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}
function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}
function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}
function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _templateObject(){var data=_taggedTemplateLiteral(["\n\t\t.signup-form__merch__item {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 1rem 0;\n\t\t\tbackground: #eee;\n\t\t\tpadding: 1.5rem;\n\n\t\t\t&-content {\n\t\t\t\twidth: 60%;\n\t\t\t\ttext-align: left;\n\n\t\t\t\tp {\n\t\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&-bg {\n\t\t\t\twidth: 35%;\n\t\t\t\tbackground-color: white;\n\t\t\t\tbackground-size: contain;\n\t\t\t\tflex: 1;\n\t\t\t\tmargin-left: 5%;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tbackground-position: center center;\n\t\t\t}\n\t\t}\n\t\t.signup-form__merch__cart {\n\t\t\tdisplay: flex;\n\t\t\tmargin: 0.5rem 0;\n\t\t\tpadding: 0.5rem 1rem;\n\t\t\tbackground: #eee;\n\n\t\t\t&-title {\n\t\t\t\tflex-grow: 1;\n\t\t\t\ttext-align: left;\n\t\t\t\talign-self: center;\n\t\t\t}\n\n\t\t\t&-price {\n\t\t\t\ttext-align: right;\n\t\t\t\talign-self: center;\n\t\t\t\tmargin-right: 0.5rem;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\t.signup-form__merch--remove {\n\t\t\t\tfont-size: 0.8rem;\n\t\t\t\twidth: 100px;\n\t\t\t}\n\t\t}\n\t"]);_templateObject=function _templateObject(){return data;};return data;}
function _taggedTemplateLiteral(strings,raw){if(!raw){raw=strings.slice(0);}return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}));}
if(!window.RaiselyPrivateComponents)window.RaiselyPrivateComponents=[];window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='stepup-eden-park-unlimited-signup-form';var component=function component(RaiselyComponents,_ref){var _temp;var useState=_ref.useState,useEffect=_ref.useEffect,Fragment=_ref.Fragment;var _RaiselyComponents$Mo=RaiselyComponents.Molecules,ExerciseGoalForm=_RaiselyComponents$Mo.ExerciseGoalForm,UserForm=_RaiselyComponents$Mo.UserForm,ProfileForm=_RaiselyComponents$Mo.ProfileFormV2,CompleteForm=_RaiselyComponents$Mo.CompleteForm,DonationFormMinimal=_RaiselyComponents$Mo.DonationFormMinimal;var MultiForm=RaiselyComponents.Molecules.MultiForm;var _RaiselyComponents$Co=RaiselyComponents.Common,qs=_RaiselyComponents$Co.qs,get=_RaiselyComponents$Co.get,has=_RaiselyComponents$Co.has,pick=_RaiselyComponents$Co.pick,mirrorPathValueFromProfileName=_RaiselyComponents$Co.mirrorPathValueFromProfileName,displayCurrency=_RaiselyComponents$Co.displayCurrency,apiCurrency=_RaiselyComponents$Co.apiCurrency,processDefaultValue=_RaiselyComponents$Co.processDefaultValue,exerciseGoalFromConfig=_RaiselyComponents$Co.exerciseGoalFromConfig,exerciseMultiplierFromConfig=_RaiselyComponents$Co.exerciseMultiplierFromConfig,htmr=_RaiselyComponents$Co.htmr;var _RaiselyComponents$At=RaiselyComponents.Atoms,Button=_RaiselyComponents$At.Button,Input=_RaiselyComponents$At.Input,Icon=_RaiselyComponents$At.Icon;var styled=RaiselyComponents.styled;var Wrapper=styled("div")(_templateObject());var MerchForm=function MerchForm(_ref2){var updateValues=_ref2.updateValues,values=_ref2.values,step=_ref2.step,updateStep=_ref2.updateStep,global=_ref2.global,merchDescription=_ref2.merchDescription,merchTitle=_ref2.merchTitle,merchandise=_ref2.merchandise;var _useState=useState(merchandise.map(function(item){return _objectSpread(_objectSpread({},item),{},{option:item.options?item.options.split(",")[0].trim():null,quantity:1});})),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(values.settings.cart||[]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var updateItem=function updateItem(index,name,value){items[index][name]=value;setItems(_toConsumableArray(items));};var cartQty=function cartQty(item){return cart.filter(function(i){return i.internalTitle===item.internalTitle;}).length;};var addToCart=function addToCart(e,item){setCart([].concat(_toConsumableArray(cart),[_objectSpread({},item)]));};var removeFromCart=function removeFromCart(e,index){var newCart=_toConsumableArray(cart);newCart.splice(index,1);setCart(_toConsumableArray(newCart));};var onSubmit=function onSubmit(){updateValues({settings:{cart:cart,items:cart.map(function(item){return{type:"OTHER",description:"".concat(item.internalTitle).concat(Boolean(item.option)?" - ".concat(item.option):""),qty:1,includeInTotals:false,amount:item.price*100,"private":{merchandise:true,title:item.title,option:item.option,description:item.description}};})}},function(){return updateStep(step+1);});};var back=function back(){return updateStep(step-1);};return React.createElement(Wrapper,{className:"signup-form__merch"},merchTitle&&React.createElement("h3",{className:"signup-form__merch__heading"},merchTitle),merchDescription&&React.createElement("p",{className:"signup-form__merch__description"},merchDescription),items.length>0&&items.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__item"},React.createElement("div",{className:"signup-form__merch__item-content"},React.createElement("h4",null,item.title),React.createElement("h6",null,"$",item.price),React.createElement("p",null,htmr(item.description)),Boolean(item.options)&&React.createElement(Input,{type:"select",change:function change(name,value){return updateItem(index,"option",value);},options:item.options.split(",").map(function(item){return{value:item.trim(),label:item.trim()};}),label:item.optionsLabel||"Choose an option",value:item.option,name:"option"}),cartQty(item)<item.maxQuantity?React.createElement(Button,{onClick:function onClick(e){return addToCart(e,item);},className:"signup-form__merch--add button--full",theme:"secondary"},"+ Add"):React.createElement(Button,{className:"signup-form__merch--add button--full",theme:"secondary",disabled:true},"+ Add")),React.createElement("div",{className:"signup-form__merch__item-bg",style:{backgroundImage:"url(".concat(item.image,")")}}));}),cart.length>0&&React.createElement("h3",{className:"signup-form__merch__card-heading"},"Your Cart"),cart.length>0&&cart.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__cart"},React.createElement("div",{className:"signup-form__merch__cart-title"},item.title," ",Boolean(item.option)&&"- ".concat(item.option)),React.createElement("div",{className:"signup-form__merch__cart-price"},"$",item.price),React.createElement(Button,{onClick:function onClick(e){return removeFromCart(e,index);},className:"signup-form__merch--remove",theme:"inverse"},"- Remove"));}),React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{onClick:onSubmit,className:"signup-form__exercise--next button--full",type:"submit"},"Next"),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:function onClick(e){return back(e);}},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back"))));};var PaymentForm=function(_React$Component){_inherits(PaymentForm,_React$Component);var _super=_createSuper(PaymentForm);function PaymentForm(){var _this;_classCallCheck(this,PaymentForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),"state",{loading:false,promoCode:""});_defineProperty(_assertThisInitialized(_this),"next",function(){return _this.props.updateStep(_this.props.step+1);});_defineProperty(_assertThisInitialized(_this),"back",function(){return _this.props.updateStep(_this.props.step-1);});_defineProperty(_assertThisInitialized(_this),"submit",function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref3){var data,processSCADonation,registrationItems,_this$getRegistration,amount,selfDonationAmount,donationPayload,api,result;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref3.data,processSCADonation=_ref3.processSCADonation;registrationItems=[];if(_this.props.enableRego){_this$getRegistration=_this.getRegistrationAmount(),amount=_this$getRegistration.amount;if(amount){registrationItems.push({amount:amount,type:"REGISTRATION",includeInTotals:false,description:_this.props.registrationDescription||"Registration Fee"});}
if(_this.props.enableDonation){selfDonationAmount=data.amount-amount;if(selfDonationAmount){registrationItems.push({amount:selfDonationAmount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}}else if(_this.props.enableDonation){if(data.amount){registrationItems.push({amount:data.amount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}
Object.assign(data,{items:[].concat(_toConsumableArray(data.items||[]),registrationItems,_toConsumableArray(_this.props.values.settings.items))});if(!processSCADonation){_context.next=20;break;}
_this.setState({loading:true});donationPayload=_objectSpread(_objectSpread(_objectSpread({},data),pick(_this.props.values.user,["firstName","lastName","preferredName","fullName","email"])),{},{forRegistration:_this.props.values.profile.path});api=_this.props.api;_context.prev=8;_context.next=11;return api.donations.create({data:donationPayload});case 11:result=_context.sent.body().data();_context.next=14;return processSCADonation(result);case 14:_this.props.updateValues({donation:{uuid:result.data.uuid},loginToken:result.token},_this.next);case 15:_context.prev=15;_this.setState({loading:false});return _context.finish(15);case 18:_context.next=21;break;case 20:_this.props.updateValues({donation:data},_this.next);case 21:case "end":return _context.stop();}}},_callee,null,[[8,,15,18]]);}));return function(_x){return _ref4.apply(this,arguments);};}());_defineProperty(_assertThisInitialized(_this),"getRegistrationAmount",function(){var _this$props=_this.props,registrationAmount=_this$props.registrationAmount,registrationAmountField=_this$props.registrationAmountField,promoCodes=_this$props.promoCodes,global=_this$props.global,values=_this$props.values;var amount=registrationAmount;var description="Registration Fee";console.log('findme',values);var numberOfRegistrants=Number(values.profile["private"].numberOfParticipants);if(registrationAmountField){var dynamicAmount=get(_this.props.values,registrationAmountField);amount=dynamicAmount?apiCurrency(dynamicAmount.split(":")[0],global.campaign.currency):amount;description=dynamicAmount&&dynamicAmount.split(":")[1]?dynamicAmount.split(":")[1]:description;}
amount=amount*numberOfRegistrants;description="".concat(description," x ").concat(numberOfRegistrants);if(promoCodes&&promoCodes.length>0){if(_this.state.code&&_this.state.code.discount){amount=amount*((100-_this.state.code.discount)/100);}}
return{amount:amount,description:description};});_defineProperty(_assertThisInitialized(_this),"getMerch",function(){var merchItems=_this.props.values.settings.items;var merchAmount=merchItems.reduce(function(prev,curr){return prev+curr.amount;},0);return{merchItems:merchItems,merchAmount:merchAmount};});_defineProperty(_assertThisInitialized(_this),"setPromoCode",function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var promoCodes=_this.props.promoCodes;var code=promoCodes.find(function(c){return c.code.toLowerCase()===value.trim().toLowerCase();});_this.setState({promoCode:value,code:code});if(code){_this.props.updateValues({profile:{"public":_objectSpread(_objectSpread({},_this.props.values.profile["public"]),{},{promoCode:code.code})}});}});return _this;}
_createClass(PaymentForm,[{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,enableRego=_this$props2.enableRego,completeButton=_this$props2.completeButton,paymentDonationTitle=_this$props2.paymentDonationTitle,paymentRegistrationTitle=_this$props2.paymentRegistrationTitle,registrationDescription=_this$props2.registrationDescription,promoCodes=_this$props2.promoCodes,global=_this$props2.global;var loading=this.state.loading;if(enableRego){var _this$getRegistration2=this.getRegistrationAmount(),_this$getRegistration3=_this$getRegistration2.amount,regAmount=_this$getRegistration3===void 0?0:_this$getRegistration3,description=_this$getRegistration2.description;var _this$getMerch=this.getMerch(),merchAmount=_this$getMerch.merchAmount,_this$getMerch$merchI=_this$getMerch.merchItems,merchItems=_this$getMerch$merchI===void 0?[]:_this$getMerch$merchI;return React.createElement(Fragment,null,loading&&React.createElement("div",{className:"signup-form__loading"},React.createElement(Spinner,null),React.createElement("p",null,"One moment...")),React.createElement("div",{className:"signup-form__payment signup-form__payment--registration",style:{display:loading?"none":"block"}},paymentRegistrationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentRegistrationTitle),(regAmount>0||this.state.code)&&React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},registrationDescription||description,this.state.code&&" (".concat(this.state.code.code," - ").concat(this.state.code.discount,"% off)")),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(regAmount,global.campaign.currency))),merchItems.map(function(item){return React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},item["private"].title,Boolean(item["private"].option)&&" - ".concat(item["private"].option)),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(item.amount,global.campaign.currency)));}),promoCodes&&promoCodes.length>0&&React.createElement("div",{style:{padding:"1rem 0"}},React.createElement("h5",{style:{marginTop:"0"},className:"signup-form__promo-code-heading"},"Promo Code"),React.createElement("p",{style:{marginTop:"-10px",marginBottom:"1rem"}},"If you have a promo code, enter it here:"),React.createElement(Input,{type:"text",change:function change(name,value){return _this2.setPromoCode(value);},label:"Promo code",value:this.state.promoCode,name:"promoCode"})),regAmount||merchAmount?React.createElement(Fragment,null,React.createElement("h5",{className:"signup-form__payment-card-heading"},"Payment Details"),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,amount:Number(regAmount)+Number(merchAmount),registrationAmount:Number(regAmount)+Number(merchAmount),appendToForm:function appendToForm(){return React.createElement("div",{className:"signup-form__navigation"},React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this2.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")));}}))):React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{className:"signup-form__profile--next",onClick:this.next},"Continue"),React.createElement("br",null),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")))));}
return React.createElement("div",{className:"signup-form__payment signup-form__payment--donation"},paymentDonationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentDonationTitle),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,appendToForm:function appendToForm(amount){return React.createElement("div",{className:"signup-form__navigation"},(!amount||amount===0)&&React.createElement(Fragment,null,React.createElement(Button,{className:"signup-form__skip-payment signup-form__navigation__button--next",theme:"primary",onClick:_this2.next,type:"submit"},completeButton),React.createElement("br",null)),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this2.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")),amount>0&&React.createElement(Fragment,null," - ",React.createElement("button",{className:"signup-form__navigation__link signup-form__skip",onClick:_this2.next},React.createElement("span",null,"Skip and continue to your dashboard"),React.createElement(Icon,{name:"chevron_right",size:"small"}))));}})));}}]);return PaymentForm;}(React.Component);return _temp=function(_React$Component2){_inherits(CustomSignupForm,_React$Component2);var _super2=_createSuper(CustomSignupForm);function CustomSignupForm(props){var _this3;_classCallCheck(this,CustomSignupForm);_this3=_super2.call(this,props);_defineProperty(_assertThisInitialized(_this3),"updateValues",function(handleState,afterUpdateCallback,toRemove){if(typeof handleState==="function"){return _this3.setState(handleState,afterUpdateCallback);}
var _assertThisInitialize=_assertThisInitialized(_this3),oldState=_assertThisInitialize.state;var toUpdate={};["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken"].forEach(function(updateKey){if(!handleState[updateKey])return;toUpdate[updateKey]=_objectSpread(_objectSpread({},oldState[updateKey]),handleState[updateKey]);if(_typeof(handleState[updateKey])!=="object"){toUpdate[updateKey]=handleState[updateKey];}});(toRemove||[]).forEach(function(key){return toUpdate[key]=null;});return _this3.setState(toUpdate,afterUpdateCallback);});var profile={currency:props.global.campaign.currency,"private":{courseoptions:'unlimited-12-yrs'}};var _exerciseGoalFromConf=exerciseGoalFromConfig(props.global.campaign.config),defaultExerciseValue=_exerciseGoalFromConf.defaultValue,exerciseFieldName=_exerciseGoalFromConf.fieldName;if(exerciseFieldName){profile[exerciseFieldName]=defaultExerciseValue;}
var _exerciseMultiplierFr=exerciseMultiplierFromConfig(props.global.campaign.config),multiplier=_exerciseMultiplierFr.multiplier;var rawQuery=window.location.href.split("?")[1];var queryParams=rawQuery?qs.parse(rawQuery):{};if(queryParams.exerciseGoal){profile.exerciseGoal=queryParams.exerciseGoal*multiplier;}
if(queryParams.exerciseGoalTime){profile.exerciseGoalTime=queryParams.exerciseGoalTime*multiplier;}
_this3.state={user:{"private":{courseOptions:'unlimited-12-yrs'}},profile:profile,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:false,feeFixed:28,feePercent:0.0385,cart:[],items:[]},error:null};if(queryParams.parentId){_this3.fetchTeam(queryParams.parentId);}
return _this3;}
_createClass(CustomSignupForm,[{key:"fetchTeam",value:function(){var _fetchTeam=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(id){var profileData,profile;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.props.api.profiles.get({id:id});case 2:profileData=_context2.sent;profile=profileData.body().data().data;this.setState({profile:_objectSpread(_objectSpread({},this.state.profile),{},{parentUuid:profile.uuid}),parentProfile:profile});case 5:case "end":return _context2.stop();}}},_callee2,this);}));function fetchTeam(_x2){return _fetchTeam.apply(this,arguments);}
return fetchTeam;}()},{key:"render",value:function render(){var defaultProps=this.props;var props=_objectSpread(_objectSpread({},defaultProps),this.props.getValues());var steps=[];if(props.enableExerciseGoal){steps.push(ExerciseGoalForm);}
steps.push(UserForm);steps.push(ProfileForm);if(props.enableMerchandise){steps.push(MerchForm);}
if(props.enableRego||props.enableDonation){steps.push(PaymentForm);}
steps.push(CompleteForm);return React.createElement(MultiForm,_objectSpread(_objectSpread({name:"signup-form",variant:"signup-form--v2",promptOnLeave:"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},props),{},{values:this.state,updateValues:this.updateValues,steps:steps,error:this.state.error}));}}]);return CustomSignupForm;}(React.Component),_temp;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":9},"enableRego":{"type":"boolean","label":"Enable Registration Fee","value":false},"promoCodes":{"type":"repeater","group":"fees","label":"Promo Codes","value":[],"single":"Promo Code","options":[{"id":"discount","type":"number","label":"Percentage Discount","defaultValue":""},{"id":"code","type":"text","label":"Code","defaultValue":""}]},"enableTeams":{"type":"boolean","label":"Enable teams","value":true},"accountTitle":{"type":"text","group":"headings","label":"Account Form Title","value":"Your Account"},"profileTitle":{"type":"text","group":"headings","label":"Profile Form Title","value":"Your Profile"},"teamLanguage":{"type":"text","group":"language","label":"Team Language","value":"Team"},"accountButton":{"type":"text","group":"buttons","label":"Account Form Button","value":"Continue"},"exerciseGoals":{"type":"repeater","group":"exercise","label":"Exercise goals","value":[{"value":30,"description":"Lorem Ipsum"}],"options":[{"id":"value","type":"number","label":"Goal Amount (km, hours or miles)","defaultValue":""},{"id":"description","type":"text","label":"Goal Description","defaultValue":""}]},"exerciseTitle":{"type":"text","group":"headings","label":"Exercise Goal Form Title","value":"Choose your activity goal"},"paymentButton":{"help":"You can use {amount} to dynamically insert the donation amount 🤯","type":"text","group":"buttons","label":"Payment Button","value":"Donate {amount} and complete Sign Up"},"completeButton":{"type":"text","group":"buttons","label":"Complete Button","value":"Sign Up"},"enableDonation":{"type":"boolean","label":"Enable Self Donation","value":true},"enableFacebook":{"type":"boolean","label":"Enable Facebook signup","value":true},"passwordLength":{"type":"number","group":"advanced","label":"Minimum Password length","value":6},"showTitleIcons":{"type":"boolean","group":"headings","label":"Show Heading Icons","value":true},"joinButtonTitle":{"type":"text","group":"language","label":"Join a Team Button"},"profileLanguage":{"type":"text","group":"language","label":"Profile Language","value":"Profile"},"teamButtonTitle":{"type":"text","group":"language","label":"Start a Team Button"},"avoidDefaultNames":{"help":"Avoid generating profile and team names automatically","type":"boolean","group":"advanced","label":"Disable automatic naming","value":false},"enableExerciseGoal":{"help":"You can set your activity types and units in <a target=\"_blank\" href=\"../setup/activity\">Activity Settings</a>.","type":"boolean","group":"exercise","label":"Enable exercise goal step","value":false},"registrationAmount":{"type":"currency","group":"fees","label":"Registration Fee (per person)","value":5000},"exerciseDescription":{"type":"text","group":"language","label":"Exercise Goal Description","value":"Choose a goal from the list below"},"paymentDonationTitle":{"type":"text","group":"headings","label":"Donation Title","value":"Kickstart your Fundraising"},"joinButtonDescription":{"type":"text","group":"language","label":"Join a Team Description","value":""},"teamButtonDescription":{"type":"text","group":"language","label":"Start a Team Description","value":""},"registrationAmountField":{"help":"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field.","type":"text","group":"fees","label":"Registration Fee Field","value":""},"registrationDescription":{"help":"","type":"text","group":"fees","label":"Registration Fee Description","value":""},"paymentRegistrationTitle":{"type":"text","group":"headings","label":"Registration Fee Title","value":"Pay the Registration Fee"},"alphabeticalProfileSearch":{"help":"Order Team search results alphabetically instead of by total","type":"boolean","group":"advanced","label":"Sort Teams Alphabetically","value":false}},"customComponent":"stepup-eden-park-unlimited-signup-form"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"stepup-eden-park-unlimited-signup-form");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='stepup-eden-park-junior-signup-form';var component=function component(RaiselyComponents,_ref5){var _temp2;var useState=_ref5.useState,useEffect=_ref5.useEffect,Fragment=_ref5.Fragment;var _RaiselyComponents$Mo2=RaiselyComponents.Molecules,ExerciseGoalForm=_RaiselyComponents$Mo2.ExerciseGoalForm,UserForm=_RaiselyComponents$Mo2.UserForm,ProfileForm=_RaiselyComponents$Mo2.ProfileFormV2,CompleteForm=_RaiselyComponents$Mo2.CompleteForm,DonationFormMinimal=_RaiselyComponents$Mo2.DonationFormMinimal;var MultiForm=RaiselyComponents.Molecules.MultiForm;var _RaiselyComponents$Co2=RaiselyComponents.Common,qs=_RaiselyComponents$Co2.qs,get=_RaiselyComponents$Co2.get,has=_RaiselyComponents$Co2.has,pick=_RaiselyComponents$Co2.pick,mirrorPathValueFromProfileName=_RaiselyComponents$Co2.mirrorPathValueFromProfileName,displayCurrency=_RaiselyComponents$Co2.displayCurrency,apiCurrency=_RaiselyComponents$Co2.apiCurrency,processDefaultValue=_RaiselyComponents$Co2.processDefaultValue,exerciseGoalFromConfig=_RaiselyComponents$Co2.exerciseGoalFromConfig,exerciseMultiplierFromConfig=_RaiselyComponents$Co2.exerciseMultiplierFromConfig,htmr=_RaiselyComponents$Co2.htmr;var _RaiselyComponents$At2=RaiselyComponents.Atoms,Button=_RaiselyComponents$At2.Button,Input=_RaiselyComponents$At2.Input,Icon=_RaiselyComponents$At2.Icon;var styled=RaiselyComponents.styled;var Wrapper=styled("div")(_templateObject2());var MerchForm=function MerchForm(_ref6){var updateValues=_ref6.updateValues,values=_ref6.values,step=_ref6.step,updateStep=_ref6.updateStep,global=_ref6.global,merchDescription=_ref6.merchDescription,merchTitle=_ref6.merchTitle,merchandise=_ref6.merchandise;var _useState5=useState(merchandise.map(function(item){return _objectSpread(_objectSpread({},item),{},{option:item.options?item.options.split(",")[0].trim():null,quantity:1});})),_useState6=_slicedToArray(_useState5,2),items=_useState6[0],setItems=_useState6[1];var _useState7=useState(values.settings.cart||[]),_useState8=_slicedToArray(_useState7,2),cart=_useState8[0],setCart=_useState8[1];var updateItem=function updateItem(index,name,value){items[index][name]=value;setItems(_toConsumableArray(items));};var cartQty=function cartQty(item){return cart.filter(function(i){return i.internalTitle===item.internalTitle;}).length;};var addToCart=function addToCart(e,item){setCart([].concat(_toConsumableArray(cart),[_objectSpread({},item)]));};var removeFromCart=function removeFromCart(e,index){var newCart=_toConsumableArray(cart);newCart.splice(index,1);setCart(_toConsumableArray(newCart));};var onSubmit=function onSubmit(){updateValues({settings:{cart:cart,items:cart.map(function(item){return{type:"OTHER",description:"".concat(item.internalTitle).concat(Boolean(item.option)?" - ".concat(item.option):""),qty:1,includeInTotals:false,amount:item.price*100,"private":{merchandise:true,title:item.title,option:item.option,description:item.description}};})}},function(){return updateStep(step+1);});};var back=function back(){return updateStep(step-1);};return React.createElement(Wrapper,{className:"signup-form__merch"},merchTitle&&React.createElement("h3",{className:"signup-form__merch__heading"},merchTitle),merchDescription&&React.createElement("p",{className:"signup-form__merch__description"},merchDescription),items.length>0&&items.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__item"},React.createElement("div",{className:"signup-form__merch__item-content"},React.createElement("h4",null,item.title),React.createElement("h6",null,"$",item.price),React.createElement("p",null,htmr(item.description)),Boolean(item.options)&&React.createElement(Input,{type:"select",change:function change(name,value){return updateItem(index,"option",value);},options:item.options.split(",").map(function(item){return{value:item.trim(),label:item.trim()};}),label:item.optionsLabel||"Choose an option",value:item.option,name:"option"}),cartQty(item)<item.maxQuantity?React.createElement(Button,{onClick:function onClick(e){return addToCart(e,item);},className:"signup-form__merch--add button--full",theme:"secondary"},"+ Add"):React.createElement(Button,{className:"signup-form__merch--add button--full",theme:"secondary",disabled:true},"+ Add")),React.createElement("div",{className:"signup-form__merch__item-bg",style:{backgroundImage:"url(".concat(item.image,")")}}));}),cart.length>0&&React.createElement("h3",{className:"signup-form__merch__card-heading"},"Your Cart"),cart.length>0&&cart.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__cart"},React.createElement("div",{className:"signup-form__merch__cart-title"},item.title," ",Boolean(item.option)&&"- ".concat(item.option)),React.createElement("div",{className:"signup-form__merch__cart-price"},"$",item.price),React.createElement(Button,{onClick:function onClick(e){return removeFromCart(e,index);},className:"signup-form__merch--remove",theme:"inverse"},"- Remove"));}),React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{onClick:onSubmit,className:"signup-form__exercise--next button--full",type:"submit"},"Next"),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:function onClick(e){return back(e);}},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back"))));};var PaymentForm=function(_React$Component3){_inherits(PaymentForm,_React$Component3);var _super3=_createSuper(PaymentForm);function PaymentForm(){var _this4;_classCallCheck(this,PaymentForm);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}
_this4=_super3.call.apply(_super3,[this].concat(args));_defineProperty(_assertThisInitialized(_this4),"state",{loading:false,promoCode:""});_defineProperty(_assertThisInitialized(_this4),"next",function(){return _this4.props.updateStep(_this4.props.step+1);});_defineProperty(_assertThisInitialized(_this4),"back",function(){return _this4.props.updateStep(_this4.props.step-1);});_defineProperty(_assertThisInitialized(_this4),"submit",function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref7){var data,processSCADonation,registrationItems,_this4$getRegistratio,amount,selfDonationAmount,donationPayload,api,result;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:data=_ref7.data,processSCADonation=_ref7.processSCADonation;registrationItems=[];if(_this4.props.enableRego){_this4$getRegistratio=_this4.getRegistrationAmount(),amount=_this4$getRegistratio.amount;if(amount){registrationItems.push({amount:amount,type:"REGISTRATION",includeInTotals:false,description:_this4.props.registrationDescription||"Registration Fee"});}
if(_this4.props.enableDonation){selfDonationAmount=data.amount-amount;if(selfDonationAmount){registrationItems.push({amount:selfDonationAmount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}}else if(_this4.props.enableDonation){if(data.amount){registrationItems.push({amount:data.amount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}
Object.assign(data,{items:[].concat(_toConsumableArray(data.items||[]),registrationItems,_toConsumableArray(_this4.props.values.settings.items))});if(!processSCADonation){_context3.next=20;break;}
_this4.setState({loading:true});donationPayload=_objectSpread(_objectSpread(_objectSpread({},data),pick(_this4.props.values.user,["firstName","lastName","preferredName","fullName","email"])),{},{forRegistration:_this4.props.values.profile.path});api=_this4.props.api;_context3.prev=8;_context3.next=11;return api.donations.create({data:donationPayload});case 11:result=_context3.sent.body().data();_context3.next=14;return processSCADonation(result);case 14:_this4.props.updateValues({donation:{uuid:result.data.uuid},loginToken:result.token},_this4.next);case 15:_context3.prev=15;_this4.setState({loading:false});return _context3.finish(15);case 18:_context3.next=21;break;case 20:_this4.props.updateValues({donation:data},_this4.next);case 21:case "end":return _context3.stop();}}},_callee3,null,[[8,,15,18]]);}));return function(_x3){return _ref8.apply(this,arguments);};}());_defineProperty(_assertThisInitialized(_this4),"getRegistrationAmount",function(){var _this4$props=_this4.props,registrationAmount=_this4$props.registrationAmount,registrationAmountField=_this4$props.registrationAmountField,promoCodes=_this4$props.promoCodes,global=_this4$props.global,values=_this4$props.values;var amount=registrationAmount;var description="Registration Fee";console.log('findme',values);var numberOfRegistrants=Number(values.profile["private"].numberOfParticipants);if(registrationAmountField){var dynamicAmount=get(_this4.props.values,registrationAmountField);amount=dynamicAmount?apiCurrency(dynamicAmount.split(":")[0],global.campaign.currency):amount;description=dynamicAmount&&dynamicAmount.split(":")[1]?dynamicAmount.split(":")[1]:description;}
amount=amount*numberOfRegistrants;description="".concat(description," x ").concat(numberOfRegistrants);if(promoCodes&&promoCodes.length>0){if(_this4.state.code&&_this4.state.code.discount){amount=amount*((100-_this4.state.code.discount)/100);}}
return{amount:amount,description:description};});_defineProperty(_assertThisInitialized(_this4),"getMerch",function(){var merchItems=_this4.props.values.settings.items;var merchAmount=merchItems.reduce(function(prev,curr){return prev+curr.amount;},0);return{merchItems:merchItems,merchAmount:merchAmount};});_defineProperty(_assertThisInitialized(_this4),"setPromoCode",function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var promoCodes=_this4.props.promoCodes;var code=promoCodes.find(function(c){return c.code.toLowerCase()===value.trim().toLowerCase();});_this4.setState({promoCode:value,code:code});if(code){_this4.props.updateValues({profile:{"public":_objectSpread(_objectSpread({},_this4.props.values.profile["public"]),{},{promoCode:code.code})}});}});return _this4;}
_createClass(PaymentForm,[{key:"render",value:function render(){var _this5=this;var _this$props3=this.props,enableRego=_this$props3.enableRego,completeButton=_this$props3.completeButton,paymentDonationTitle=_this$props3.paymentDonationTitle,paymentRegistrationTitle=_this$props3.paymentRegistrationTitle,registrationDescription=_this$props3.registrationDescription,promoCodes=_this$props3.promoCodes,global=_this$props3.global;var loading=this.state.loading;if(enableRego){var _this$getRegistration4=this.getRegistrationAmount(),_this$getRegistration5=_this$getRegistration4.amount,regAmount=_this$getRegistration5===void 0?0:_this$getRegistration5,description=_this$getRegistration4.description;var _this$getMerch2=this.getMerch(),merchAmount=_this$getMerch2.merchAmount,_this$getMerch2$merch=_this$getMerch2.merchItems,merchItems=_this$getMerch2$merch===void 0?[]:_this$getMerch2$merch;return React.createElement(Fragment,null,loading&&React.createElement("div",{className:"signup-form__loading"},React.createElement(Spinner,null),React.createElement("p",null,"One moment...")),React.createElement("div",{className:"signup-form__payment signup-form__payment--registration",style:{display:loading?"none":"block"}},paymentRegistrationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentRegistrationTitle),(regAmount>0||this.state.code)&&React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},registrationDescription||description,this.state.code&&" (".concat(this.state.code.code," - ").concat(this.state.code.discount,"% off)")),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(regAmount,global.campaign.currency))),merchItems.map(function(item){return React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},item["private"].title,Boolean(item["private"].option)&&" - ".concat(item["private"].option)),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(item.amount,global.campaign.currency)));}),promoCodes&&promoCodes.length>0&&React.createElement("div",{style:{padding:"1rem 0"}},React.createElement("h5",{style:{marginTop:"0"},className:"signup-form__promo-code-heading"},"Promo Code"),React.createElement("p",{style:{marginTop:"-10px",marginBottom:"1rem"}},"If you have a promo code, enter it here:"),React.createElement(Input,{type:"text",change:function change(name,value){return _this5.setPromoCode(value);},label:"Promo code",value:this.state.promoCode,name:"promoCode"})),regAmount||merchAmount?React.createElement(Fragment,null,React.createElement("h5",{className:"signup-form__payment-card-heading"},"Payment Details"),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,amount:Number(regAmount)+Number(merchAmount),registrationAmount:Number(regAmount)+Number(merchAmount),appendToForm:function appendToForm(){return React.createElement("div",{className:"signup-form__navigation"},React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this5.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")));}}))):React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{className:"signup-form__profile--next",onClick:this.next},"Continue"),React.createElement("br",null),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")))));}
return React.createElement("div",{className:"signup-form__payment signup-form__payment--donation"},paymentDonationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentDonationTitle),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,appendToForm:function appendToForm(amount){return React.createElement("div",{className:"signup-form__navigation"},(!amount||amount===0)&&React.createElement(Fragment,null,React.createElement(Button,{className:"signup-form__skip-payment signup-form__navigation__button--next",theme:"primary",onClick:_this5.next,type:"submit"},completeButton),React.createElement("br",null)),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this5.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")),amount>0&&React.createElement(Fragment,null," - ",React.createElement("button",{className:"signup-form__navigation__link signup-form__skip",onClick:_this5.next},React.createElement("span",null,"Skip and continue to your dashboard"),React.createElement(Icon,{name:"chevron_right",size:"small"}))));}})));}}]);return PaymentForm;}(React.Component);return _temp2=function(_React$Component4){_inherits(CustomSignupForm,_React$Component4);var _super4=_createSuper(CustomSignupForm);function CustomSignupForm(props){var _this6;_classCallCheck(this,CustomSignupForm);_this6=_super4.call(this,props);_defineProperty(_assertThisInitialized(_this6),"updateValues",function(handleState,afterUpdateCallback,toRemove){if(typeof handleState==="function"){return _this6.setState(handleState,afterUpdateCallback);}
var _assertThisInitialize2=_assertThisInitialized(_this6),oldState=_assertThisInitialize2.state;var toUpdate={};["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken"].forEach(function(updateKey){if(!handleState[updateKey])return;toUpdate[updateKey]=_objectSpread(_objectSpread({},oldState[updateKey]),handleState[updateKey]);if(_typeof(handleState[updateKey])!=="object"){toUpdate[updateKey]=handleState[updateKey];}});(toRemove||[]).forEach(function(key){return toUpdate[key]=null;});return _this6.setState(toUpdate,afterUpdateCallback);});var profile={currency:props.global.campaign.currency,"private":{courseoptions:'junior-511-yrs'}};var _exerciseGoalFromConf2=exerciseGoalFromConfig(props.global.campaign.config),defaultExerciseValue=_exerciseGoalFromConf2.defaultValue,exerciseFieldName=_exerciseGoalFromConf2.fieldName;if(exerciseFieldName){profile[exerciseFieldName]=defaultExerciseValue;}
var _exerciseMultiplierFr2=exerciseMultiplierFromConfig(props.global.campaign.config),multiplier=_exerciseMultiplierFr2.multiplier;var rawQuery=window.location.href.split("?")[1];var queryParams=rawQuery?qs.parse(rawQuery):{};if(queryParams.exerciseGoal){profile.exerciseGoal=queryParams.exerciseGoal*multiplier;}
if(queryParams.exerciseGoalTime){profile.exerciseGoalTime=queryParams.exerciseGoalTime*multiplier;}
_this6.state={user:{"private":{courseOptions:'junior-511-yrs'}},profile:profile,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:false,feeFixed:28,feePercent:0.0385,cart:[],items:[]},error:null};if(queryParams.parentId){_this6.fetchTeam(queryParams.parentId);}
return _this6;}
_createClass(CustomSignupForm,[{key:"fetchTeam",value:function(){var _fetchTeam2=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(id){var profileData,profile;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.props.api.profiles.get({id:id});case 2:profileData=_context4.sent;profile=profileData.body().data().data;this.setState({profile:_objectSpread(_objectSpread({},this.state.profile),{},{parentUuid:profile.uuid}),parentProfile:profile});case 5:case "end":return _context4.stop();}}},_callee4,this);}));function fetchTeam(_x4){return _fetchTeam2.apply(this,arguments);}
return fetchTeam;}()},{key:"render",value:function render(){var defaultProps=this.props;var props=_objectSpread(_objectSpread({},defaultProps),this.props.getValues());var steps=[];if(props.enableExerciseGoal){steps.push(ExerciseGoalForm);}
steps.push(UserForm);steps.push(ProfileForm);if(props.enableMerchandise){steps.push(MerchForm);}
if(props.enableRego||props.enableDonation){steps.push(PaymentForm);}
steps.push(CompleteForm);return React.createElement(MultiForm,_objectSpread(_objectSpread({name:"signup-form",variant:"signup-form--v2",promptOnLeave:"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},props),{},{values:this.state,updateValues:this.updateValues,steps:steps,error:this.state.error}));}}]);return CustomSignupForm;}(React.Component),_temp2;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":16},"enableRego":{"type":"boolean","label":"Enable Registration Fee","value":false},"promoCodes":{"type":"repeater","group":"fees","label":"Promo Codes","value":[],"single":"Promo Code","options":[{"id":"discount","type":"number","label":"Percentage Discount","defaultValue":""},{"id":"code","type":"text","label":"Code","defaultValue":""}]},"enableTeams":{"type":"boolean","label":"Enable teams","value":true},"accountTitle":{"type":"text","group":"headings","label":"Account Form Title","value":"Your Account"},"profileTitle":{"type":"text","group":"headings","label":"Profile Form Title","value":"Your Profile"},"teamLanguage":{"type":"text","group":"language","label":"Team Language","value":"Team"},"accountButton":{"type":"text","group":"buttons","label":"Account Form Button","value":"Continue"},"exerciseGoals":{"type":"repeater","group":"exercise","label":"Exercise goals","value":[{"value":30,"description":"Lorem Ipsum"}],"options":[{"id":"value","type":"number","label":"Goal Amount (km, hours or miles)","defaultValue":""},{"id":"description","type":"text","label":"Goal Description","defaultValue":""}]},"exerciseTitle":{"type":"text","group":"headings","label":"Exercise Goal Form Title","value":"Choose your activity goal"},"paymentButton":{"help":"You can use {amount} to dynamically insert the donation amount 🤯","type":"text","group":"buttons","label":"Payment Button","value":"Donate {amount} and complete Sign Up"},"completeButton":{"type":"text","group":"buttons","label":"Complete Button","value":"Sign Up"},"enableDonation":{"type":"boolean","label":"Enable Self Donation","value":true},"enableFacebook":{"type":"boolean","label":"Enable Facebook signup","value":true},"passwordLength":{"type":"number","group":"advanced","label":"Minimum Password length","value":6},"showTitleIcons":{"type":"boolean","group":"headings","label":"Show Heading Icons","value":true},"joinButtonTitle":{"type":"text","group":"language","label":"Join a Team Button"},"profileLanguage":{"type":"text","group":"language","label":"Profile Language","value":"Profile"},"teamButtonTitle":{"type":"text","group":"language","label":"Start a Team Button"},"avoidDefaultNames":{"help":"Avoid generating profile and team names automatically","type":"boolean","group":"advanced","label":"Disable automatic naming","value":false},"enableExerciseGoal":{"help":"You can set your activity types and units in <a target=\"_blank\" href=\"../setup/activity\">Activity Settings</a>.","type":"boolean","group":"exercise","label":"Enable exercise goal step","value":false},"registrationAmount":{"type":"currency","group":"fees","label":"Registration Fee (per person)","value":5000},"exerciseDescription":{"type":"text","group":"language","label":"Exercise Goal Description","value":"Choose a goal from the list below"},"paymentDonationTitle":{"type":"text","group":"headings","label":"Donation Title","value":"Kickstart your Fundraising"},"joinButtonDescription":{"type":"text","group":"language","label":"Join a Team Description","value":""},"teamButtonDescription":{"type":"text","group":"language","label":"Start a Team Description","value":""},"registrationAmountField":{"help":"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field.","type":"text","group":"fees","label":"Registration Fee Field","value":""},"registrationDescription":{"help":"","type":"text","group":"fees","label":"Registration Fee Description","value":""},"paymentRegistrationTitle":{"type":"text","group":"headings","label":"Registration Fee Title","value":"Pay the Registration Fee"},"alphabeticalProfileSearch":{"help":"Order Team search results alphabetically instead of by total","type":"boolean","group":"advanced","label":"Sort Teams Alphabetically","value":false}},"customComponent":"stepup-eden-park-junior-signup-form"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"stepup-eden-park-junior-signup-form");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='shave-wheel';var component=function component(RaiselyComponents){var styled=RaiselyComponents.styled;var Wrapper=styled('div')(_templateObject3());return function(_React$Component5){_inherits(MyRaiselyComponent,_React$Component5);var _super5=_createSuper(MyRaiselyComponent);function MyRaiselyComponent(){_classCallCheck(this,MyRaiselyComponent);return _super5.apply(this,arguments);}
_createClass(MyRaiselyComponent,[{key:"render",value:function render(){var values=this.props.getValues();return React.createElement(Wrapper,null,React.createElement("div",{className:"shave-wheel"},React.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.3/iframeResizer.min.js"}),React.createElement("iframe",{id:"wheel-frame",src:"https://lbcnz-shave-wheel.raisely.dev/",frameborder:"0",scrolling:"no",style:{marginTop:'25px !important',overflow:'hidden'}}),React.createElement("script",null,"iFrameResize()")));}}]);return MyRaiselyComponent;}(React.Component);};var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":5}},"customComponent":"shave-wheel"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"shave-wheel");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='advanced-signup-form';var component=function component(RaiselyComponents,_ref9){var _temp3;var useState=_ref9.useState,useEffect=_ref9.useEffect,Fragment=_ref9.Fragment;var _RaiselyComponents$Mo3=RaiselyComponents.Molecules,ExerciseGoalForm=_RaiselyComponents$Mo3.ExerciseGoalForm,UserForm=_RaiselyComponents$Mo3.UserForm,ProfileForm=_RaiselyComponents$Mo3.ProfileFormV2,CompleteForm=_RaiselyComponents$Mo3.CompleteForm,DonationFormMinimal=_RaiselyComponents$Mo3.DonationFormMinimal;var MultiForm=RaiselyComponents.Molecules.MultiForm;var _RaiselyComponents$Co3=RaiselyComponents.Common,qs=_RaiselyComponents$Co3.qs,get=_RaiselyComponents$Co3.get,has=_RaiselyComponents$Co3.has,pick=_RaiselyComponents$Co3.pick,mirrorPathValueFromProfileName=_RaiselyComponents$Co3.mirrorPathValueFromProfileName,displayCurrency=_RaiselyComponents$Co3.displayCurrency,apiCurrency=_RaiselyComponents$Co3.apiCurrency,processDefaultValue=_RaiselyComponents$Co3.processDefaultValue,exerciseGoalFromConfig=_RaiselyComponents$Co3.exerciseGoalFromConfig,exerciseMultiplierFromConfig=_RaiselyComponents$Co3.exerciseMultiplierFromConfig,htmr=_RaiselyComponents$Co3.htmr;var _RaiselyComponents$At3=RaiselyComponents.Atoms,Button=_RaiselyComponents$At3.Button,Input=_RaiselyComponents$At3.Input,Icon=_RaiselyComponents$At3.Icon;var styled=RaiselyComponents.styled;var Wrapper=styled("div")(_templateObject4());var MerchForm=function MerchForm(_ref10){var updateValues=_ref10.updateValues,values=_ref10.values,step=_ref10.step,updateStep=_ref10.updateStep,global=_ref10.global,merchDescription=_ref10.merchDescription,merchTitle=_ref10.merchTitle,merchandise=_ref10.merchandise;var _useState9=useState(merchandise.map(function(item){return _objectSpread(_objectSpread({},item),{},{option:item.options?item.options.split(",")[0].trim():null,quantity:1});})),_useState10=_slicedToArray(_useState9,2),items=_useState10[0],setItems=_useState10[1];var _useState11=useState(values.settings.cart||[]),_useState12=_slicedToArray(_useState11,2),cart=_useState12[0],setCart=_useState12[1];var updateItem=function updateItem(index,name,value){items[index][name]=value;setItems(_toConsumableArray(items));};var cartQty=function cartQty(item){return cart.filter(function(i){return i.internalTitle===item.internalTitle;}).length;};var addToCart=function addToCart(e,item){setCart([].concat(_toConsumableArray(cart),[_objectSpread({},item)]));};var removeFromCart=function removeFromCart(e,index){var newCart=_toConsumableArray(cart);newCart.splice(index,1);setCart(_toConsumableArray(newCart));};var onSubmit=function onSubmit(){updateValues({settings:{cart:cart,items:cart.map(function(item){return{type:"OTHER",description:"".concat(item.internalTitle).concat(Boolean(item.option)?" - ".concat(item.option):""),qty:1,includeInTotals:false,amount:item.price*100,"private":{merchandise:true,title:item.title,option:item.option,description:item.description}};})}},function(){return updateStep(step+1);});};var back=function back(){return updateStep(step-1);};return React.createElement(Wrapper,{className:"signup-form__merch"},merchTitle&&React.createElement("h3",{className:"signup-form__merch__heading"},merchTitle),merchDescription&&React.createElement("p",{className:"signup-form__merch__description"},merchDescription),items.length>0&&items.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__item"},React.createElement("div",{className:"signup-form__merch__item-content"},React.createElement("h4",null,item.title),React.createElement("h6",null,"$",item.price),React.createElement("p",null,htmr(item.description)),Boolean(item.options)&&React.createElement(Input,{type:"select",change:function change(name,value){return updateItem(index,"option",value);},options:item.options.split(",").map(function(item){return{value:item.trim(),label:item.trim()};}),label:item.optionsLabel||"Choose an option",value:item.option,name:"option"}),cartQty(item)<item.maxQuantity?React.createElement(Button,{onClick:function onClick(e){return addToCart(e,item);},className:"signup-form__merch--add button--full",theme:"secondary"},"+ Add"):React.createElement(Button,{className:"signup-form__merch--add button--full",theme:"secondary",disabled:true},"+ Add")),React.createElement("div",{className:"signup-form__merch__item-bg",style:{backgroundImage:"url(".concat(item.image,")")}}));}),cart.length>0&&React.createElement("h3",{className:"signup-form__merch__card-heading"},"Your Cart"),cart.length>0&&cart.map(function(item,index){return React.createElement("div",{className:"signup-form__merch__cart"},React.createElement("div",{className:"signup-form__merch__cart-title"},item.title," ",Boolean(item.option)&&"- ".concat(item.option)),React.createElement("div",{className:"signup-form__merch__cart-price"},"$",item.price),React.createElement(Button,{onClick:function onClick(e){return removeFromCart(e,index);},className:"signup-form__merch--remove",theme:"inverse"},"- Remove"));}),React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{onClick:onSubmit,className:"signup-form__exercise--next button--full",type:"submit"},"Next"),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:function onClick(e){return back(e);}},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back"))));};var PaymentForm=function(_React$Component6){_inherits(PaymentForm,_React$Component6);var _super6=_createSuper(PaymentForm);function PaymentForm(){var _this7;_classCallCheck(this,PaymentForm);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}
_this7=_super6.call.apply(_super6,[this].concat(args));_defineProperty(_assertThisInitialized(_this7),"state",{loading:false,promoCode:""});_defineProperty(_assertThisInitialized(_this7),"next",function(){return _this7.props.updateStep(_this7.props.step+1);});_defineProperty(_assertThisInitialized(_this7),"back",function(){return _this7.props.updateStep(_this7.props.step-1);});_defineProperty(_assertThisInitialized(_this7),"submit",function(){var _ref12=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref11){var data,processSCADonation,registrationItems,_this7$getRegistratio,amount,selfDonationAmount,donationPayload,api,result;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data=_ref11.data,processSCADonation=_ref11.processSCADonation;registrationItems=[];if(_this7.props.enableRego){_this7$getRegistratio=_this7.getRegistrationAmount(),amount=_this7$getRegistratio.amount;if(amount){registrationItems.push({amount:amount,type:"REGISTRATION",includeInTotals:false,description:_this7.props.registrationDescription||"Registration Fee"});}
if(_this7.props.enableDonation){selfDonationAmount=data.amount-amount;if(selfDonationAmount){registrationItems.push({amount:selfDonationAmount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}}else if(_this7.props.enableDonation){if(data.amount){registrationItems.push({amount:data.amount,type:"OTHER",includeInTotals:true,description:"Self-donation"});}}
Object.assign(data,{items:[].concat(_toConsumableArray(data.items||[]),registrationItems,_toConsumableArray(_this7.props.values.settings.items))});if(!processSCADonation){_context5.next=20;break;}
_this7.setState({loading:true});donationPayload=_objectSpread(_objectSpread(_objectSpread({},data),pick(_this7.props.values.user,["firstName","lastName","preferredName","fullName","email"])),{},{forRegistration:_this7.props.values.profile.path});api=_this7.props.api;_context5.prev=8;_context5.next=11;return api.donations.create({data:donationPayload});case 11:result=_context5.sent.body().data();_context5.next=14;return processSCADonation(result);case 14:_this7.props.updateValues({donation:{uuid:result.data.uuid},loginToken:result.token},_this7.next);case 15:_context5.prev=15;_this7.setState({loading:false});return _context5.finish(15);case 18:_context5.next=21;break;case 20:_this7.props.updateValues({donation:data},_this7.next);case 21:case "end":return _context5.stop();}}},_callee5,null,[[8,,15,18]]);}));return function(_x5){return _ref12.apply(this,arguments);};}());_defineProperty(_assertThisInitialized(_this7),"getRegistrationAmount",function(){var _this7$props=_this7.props,registrationAmount=_this7$props.registrationAmount,registrationAmountField=_this7$props.registrationAmountField,promoCodes=_this7$props.promoCodes,global=_this7$props.global;var amount=registrationAmount;var description="Registration Fee";if(registrationAmountField){var dynamicAmount=get(_this7.props.values,registrationAmountField);amount=dynamicAmount?apiCurrency(dynamicAmount.split(":")[0],global.campaign.currency):amount;description=dynamicAmount&&dynamicAmount.split(":")[1]?dynamicAmount.split(":")[1]:description;}
if(promoCodes&&promoCodes.length>0){if(_this7.state.code&&_this7.state.code.discount){amount=amount*((100-_this7.state.code.discount)/100);}}
return{amount:amount,description:description};});_defineProperty(_assertThisInitialized(_this7),"getMerch",function(){var merchItems=_this7.props.values.settings.items;var merchAmount=merchItems.reduce(function(prev,curr){return prev+curr.amount;},0);return{merchItems:merchItems,merchAmount:merchAmount};});_defineProperty(_assertThisInitialized(_this7),"setPromoCode",function(){var value=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var promoCodes=_this7.props.promoCodes;var code=promoCodes.find(function(c){return c.code.toLowerCase()===value.trim().toLowerCase();});_this7.setState({promoCode:value,code:code});if(code){_this7.props.updateValues({profile:{"public":_objectSpread(_objectSpread({},_this7.props.values.profile["public"]),{},{promoCode:code.code})}});}});return _this7;}
_createClass(PaymentForm,[{key:"render",value:function render(){var _this8=this;var _this$props4=this.props,enableRego=_this$props4.enableRego,completeButton=_this$props4.completeButton,paymentDonationTitle=_this$props4.paymentDonationTitle,paymentRegistrationTitle=_this$props4.paymentRegistrationTitle,registrationDescription=_this$props4.registrationDescription,promoCodes=_this$props4.promoCodes,global=_this$props4.global;var loading=this.state.loading;if(enableRego){var _this$getRegistration6=this.getRegistrationAmount(),_this$getRegistration7=_this$getRegistration6.amount,regAmount=_this$getRegistration7===void 0?0:_this$getRegistration7,description=_this$getRegistration6.description;var _this$getMerch3=this.getMerch(),merchAmount=_this$getMerch3.merchAmount,_this$getMerch3$merch=_this$getMerch3.merchItems,merchItems=_this$getMerch3$merch===void 0?[]:_this$getMerch3$merch;return React.createElement(Fragment,null,loading&&React.createElement("div",{className:"signup-form__loading"},React.createElement(Spinner,null),React.createElement("p",null,"One moment...")),React.createElement("div",{className:"signup-form__payment signup-form__payment--registration",style:{display:loading?"none":"block"}},paymentRegistrationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentRegistrationTitle),(regAmount>0||this.state.code)&&React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},registrationDescription||description,this.state.code&&" (".concat(this.state.code.code," - ").concat(this.state.code.discount,"% off)")),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(regAmount,global.campaign.currency))),merchItems.map(function(item){return React.createElement("div",{className:"signup-form__payment-total"},React.createElement("span",{className:"signup-form__payment-total__label"},item["private"].title,Boolean(item["private"].option)&&" - ".concat(item["private"].option)),React.createElement("span",{className:"signup-form__payment-total__amount"},displayCurrency(item.amount,global.campaign.currency)));}),promoCodes&&promoCodes.length>0&&React.createElement("div",{style:{padding:"1rem 0"}},React.createElement("h5",{style:{marginTop:"0"},className:"signup-form__promo-code-heading"},"Promo Code"),React.createElement("p",{style:{marginTop:"-10px",marginBottom:"1rem"}},"If you have a promo code, enter it here:"),React.createElement(Input,{type:"text",change:function change(name,value){return _this8.setPromoCode(value);},label:"Promo code",value:this.state.promoCode,name:"promoCode"})),regAmount||merchAmount?React.createElement(Fragment,null,React.createElement("h5",{className:"signup-form__payment-card-heading"},"Payment Details"),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,amount:Number(regAmount)+Number(merchAmount),registrationAmount:Number(regAmount)+Number(merchAmount),appendToForm:function appendToForm(){return React.createElement("div",{className:"signup-form__navigation"},React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this8.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")));}}))):React.createElement("div",{className:"signup-form__navigation"},React.createElement(Button,{className:"signup-form__profile--next",onClick:this.next},"Continue"),React.createElement("br",null),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:this.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")))));}
return React.createElement("div",{className:"signup-form__payment signup-form__payment--donation"},paymentDonationTitle&&React.createElement("h3",{className:"signup-form__title"},paymentDonationTitle),React.createElement(DonationFormMinimal,_extends({},this.props,{perks:false,recurring:false,existingCards:false,user:this.props.values.user,onTokenSuccess:this.submit,appendToForm:function appendToForm(amount){return React.createElement("div",{className:"signup-form__navigation"},(!amount||amount===0)&&React.createElement(Fragment,null,React.createElement(Button,{className:"signup-form__skip-payment signup-form__navigation__button--next",theme:"primary",onClick:_this8.next,type:"submit"},completeButton),React.createElement("br",null)),React.createElement("button",{className:"signup-form__navigation__link signup-form__back",onClick:_this8.back},React.createElement(Icon,{name:"chevron_left",size:"small"}),React.createElement("span",null,"Back")),amount>0&&React.createElement(Fragment,null," - ",React.createElement("button",{className:"signup-form__navigation__link signup-form__skip",onClick:_this8.next},React.createElement("span",null,"Skip and continue to your dashboard"),React.createElement(Icon,{name:"chevron_right",size:"small"}))));}})));}}]);return PaymentForm;}(React.Component);return _temp3=function(_React$Component7){_inherits(CustomSignupForm,_React$Component7);var _super7=_createSuper(CustomSignupForm);function CustomSignupForm(props){var _this9;_classCallCheck(this,CustomSignupForm);_this9=_super7.call(this,props);_defineProperty(_assertThisInitialized(_this9),"updateValues",function(handleState,afterUpdateCallback,toRemove){if(typeof handleState==="function"){return _this9.setState(handleState,afterUpdateCallback);}
var _assertThisInitialize3=_assertThisInitialized(_this9),oldState=_assertThisInitialize3.state;var toUpdate={};["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken"].forEach(function(updateKey){if(!handleState[updateKey])return;toUpdate[updateKey]=_objectSpread(_objectSpread({},oldState[updateKey]),handleState[updateKey]);if(_typeof(handleState[updateKey])!=="object"){toUpdate[updateKey]=handleState[updateKey];}});(toRemove||[]).forEach(function(key){return toUpdate[key]=null;});return _this9.setState(toUpdate,afterUpdateCallback);});var profile={currency:props.global.campaign.currency,"private":{}};var _exerciseGoalFromConf3=exerciseGoalFromConfig(props.global.campaign.config),defaultExerciseValue=_exerciseGoalFromConf3.defaultValue,exerciseFieldName=_exerciseGoalFromConf3.fieldName;if(exerciseFieldName){profile[exerciseFieldName]=defaultExerciseValue;}
var _exerciseMultiplierFr3=exerciseMultiplierFromConfig(props.global.campaign.config),multiplier=_exerciseMultiplierFr3.multiplier;var rawQuery=window.location.href.split("?")[1];var queryParams=rawQuery?qs.parse(rawQuery):{};if(queryParams.exerciseGoal){profile.exerciseGoal=queryParams.exerciseGoal*multiplier;}
if(queryParams.exerciseGoalTime){profile.exerciseGoalTime=queryParams.exerciseGoalTime*multiplier;}
_this9.state={user:{},profile:profile,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:false,feeFixed:28,feePercent:0.0385,cart:[],items:[]},error:null};if(queryParams.parentId){_this9.fetchTeam(queryParams.parentId);}
return _this9;}
_createClass(CustomSignupForm,[{key:"fetchTeam",value:function(){var _fetchTeam3=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(id){var profileData,profile;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.props.api.profiles.get({id:id});case 2:profileData=_context6.sent;profile=profileData.body().data().data;this.setState({profile:_objectSpread(_objectSpread({},this.state.profile),{},{parentUuid:profile.uuid}),parentProfile:profile});case 5:case "end":return _context6.stop();}}},_callee6,this);}));function fetchTeam(_x6){return _fetchTeam3.apply(this,arguments);}
return fetchTeam;}()},{key:"render",value:function render(){var defaultProps=this.props;var props=_objectSpread(_objectSpread({},defaultProps),this.props.getValues());var steps=[];if(props.enableExerciseGoal){steps.push(ExerciseGoalForm);}
steps.push(UserForm);steps.push(ProfileForm);if(props.enableMerchandise){steps.push(MerchForm);}
if(props.enableRego||props.enableDonation){steps.push(PaymentForm);}
steps.push(CompleteForm);return React.createElement(MultiForm,_objectSpread(_objectSpread({name:"signup-form",variant:"signup-form--v2",promptOnLeave:"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},props),{},{values:this.state,updateValues:this.updateValues,steps:steps,error:this.state.error}));}}]);return CustomSignupForm;}(React.Component),_temp3;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":12},"enableRego":{"type":"boolean","label":"Enable Registration Fee","value":false},"promoCodes":{"type":"repeater","group":"fees","label":"Promo Codes","value":[],"single":"Promo Code","options":[{"id":"discount","type":"number","label":"Percentage Discount","defaultValue":""},{"id":"code","type":"text","label":"Code","defaultValue":""}]},"enableTeams":{"type":"boolean","label":"Enable teams","value":true},"accountTitle":{"type":"text","group":"headings","label":"Account Form Title","value":"Your Account"},"profileTitle":{"type":"text","group":"headings","label":"Profile Form Title","value":"Your Profile"},"teamLanguage":{"type":"text","group":"language","label":"Team Language","value":"Team"},"accountButton":{"type":"text","group":"buttons","label":"Account Form Button","value":"Continue"},"exerciseGoals":{"type":"repeater","group":"exercise","label":"Exercise goals","value":[{"value":30,"description":"Lorem Ipsum"}],"options":[{"id":"value","type":"number","label":"Goal Amount (km, hours or miles)","defaultValue":""},{"id":"description","type":"text","label":"Goal Description","defaultValue":""}]},"exerciseTitle":{"type":"text","group":"headings","label":"Exercise Goal Form Title","value":"Choose your activity goal"},"paymentButton":{"help":"You can use {amount} to dynamically insert the donation amount 🤯","type":"text","group":"buttons","label":"Payment Button","value":"Donate {amount} and complete Sign Up"},"completeButton":{"type":"text","group":"buttons","label":"Complete Button","value":"Sign Up"},"enableDonation":{"type":"boolean","label":"Enable Self Donation","value":true},"enableFacebook":{"type":"boolean","label":"Enable Facebook signup","value":true},"passwordLength":{"type":"number","group":"advanced","label":"Minimum Password length","value":6},"showTitleIcons":{"type":"boolean","group":"headings","label":"Show Heading Icons","value":true},"joinButtonTitle":{"type":"text","group":"language","label":"Join a Team Button"},"profileLanguage":{"type":"text","group":"language","label":"Profile Language","value":"Profile"},"teamButtonTitle":{"type":"text","group":"language","label":"Start a Team Button"},"avoidDefaultNames":{"help":"Avoid generating profile and team names automatically","type":"boolean","group":"advanced","label":"Disable automatic naming","value":false},"enableExerciseGoal":{"help":"You can set your activity types and units in <a target=\"_blank\" href=\"../setup/activity\">Activity Settings</a>.","type":"boolean","group":"exercise","label":"Enable exercise goal step","value":false},"registrationAmount":{"type":"currency","group":"fees","label":"Registration Fee","value":5000},"exerciseDescription":{"type":"text","group":"language","label":"Exercise Goal Description","value":"Choose a goal from the list below"},"paymentDonationTitle":{"type":"text","group":"headings","label":"Donation Title","value":"Kickstart your Fundraising"},"joinButtonDescription":{"type":"text","group":"language","label":"Join a Team Description","value":""},"teamButtonDescription":{"type":"text","group":"language","label":"Start a Team Description","value":""},"registrationAmountField":{"help":"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field.","type":"text","group":"fees","label":"Registration Fee Field","value":""},"registrationDescription":{"help":"","type":"text","group":"fees","label":"Registration Fee Description","value":""},"paymentRegistrationTitle":{"type":"text","group":"headings","label":"Registration Fee Title","value":"Pay the Registration Fee"},"alphabeticalProfileSearch":{"help":"Order Team search results alphabetically instead of by total","type":"boolean","group":"advanced","label":"Sort Teams Alphabetically","value":false}},"customComponent":"advanced-signup-form"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"advanced-signup-form");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='firefighter-vip-form';var component=function component(RaiselyComponents){var _temp4;var _RaiselyComponents$Mo4=RaiselyComponents.Molecules,ExerciseGoalForm=_RaiselyComponents$Mo4.ExerciseGoalForm,UserForm=_RaiselyComponents$Mo4.UserForm,ProfileForm=_RaiselyComponents$Mo4.ProfileFormV2,PaymentForm=_RaiselyComponents$Mo4.PaymentFormV2,CompleteForm=_RaiselyComponents$Mo4.CompleteForm;var MultiForm=RaiselyComponents.Molecules.MultiForm;var _RaiselyComponents$Co4=RaiselyComponents.Common,qs=_RaiselyComponents$Co4.qs,get=_RaiselyComponents$Co4.get,has=_RaiselyComponents$Co4.has,pick=_RaiselyComponents$Co4.pick,mirrorPathValueFromProfileName=_RaiselyComponents$Co4.mirrorPathValueFromProfileName,displayCurrency=_RaiselyComponents$Co4.displayCurrency,apiCurrency=_RaiselyComponents$Co4.apiCurrency,processDefaultValue=_RaiselyComponents$Co4.processDefaultValue,exerciseGoalFromConfig=_RaiselyComponents$Co4.exerciseGoalFromConfig,exerciseMultiplierFromConfig=_RaiselyComponents$Co4.exerciseMultiplierFromConfig;return _temp4=function(_React$Component8){_inherits(CustomSignupForm,_React$Component8);var _super8=_createSuper(CustomSignupForm);function CustomSignupForm(props){var _this10;_classCallCheck(this,CustomSignupForm);_this10=_super8.call(this,props);_defineProperty(_assertThisInitialized(_this10),"updateValues",function(handleState,afterUpdateCallback,toRemove){if(typeof handleState==="function"){return _this10.setState(handleState,afterUpdateCallback);}
var _assertThisInitialize4=_assertThisInitialized(_this10),oldState=_assertThisInitialize4.state;var toUpdate={};["user","profile","teamProfile","donation","settings","error","donationUuid","wasFacebookSignup","loginToken"].forEach(function(updateKey){if(!handleState[updateKey])return;toUpdate[updateKey]=_objectSpread(_objectSpread({},oldState[updateKey]),handleState[updateKey]);if(_typeof(handleState[updateKey])!=="object"){toUpdate[updateKey]=handleState[updateKey];}});(toRemove||[]).forEach(function(key){return toUpdate[key]=null;});return _this10.setState(toUpdate,afterUpdateCallback);});var profile={currency:props.global.campaign.currency};var _exerciseGoalFromConf4=exerciseGoalFromConfig(props.global.campaign.config),defaultExerciseValue=_exerciseGoalFromConf4.defaultValue,exerciseFieldName=_exerciseGoalFromConf4.fieldName;if(exerciseFieldName){profile[exerciseFieldName]=defaultExerciseValue;}
var _exerciseMultiplierFr4=exerciseMultiplierFromConfig(props.global.campaign.config),multiplier=_exerciseMultiplierFr4.multiplier;var rawQuery=window.location.href.split("?")[1];var queryParams=rawQuery?qs.parse(rawQuery):{};if(queryParams.exerciseGoal){profile.exerciseGoal=queryParams.exerciseGoal*multiplier;}
if(queryParams.exerciseGoalTime){profile.exerciseGoalTime=queryParams.exerciseGoalTime*multiplier;}
profile["private"]={isVip:true};_this10.state={user:{},profile:profile,teamProfile:null,donation:null,donationUuid:null,settings:{searchGroup:false,feeFixed:28,feePercent:0.0385},error:null};if(queryParams.parentId){_this10.fetchTeam(queryParams.parentId);}
return _this10;}
_createClass(CustomSignupForm,[{key:"fetchTeam",value:function(){var _fetchTeam4=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(id){var profileData,profile;return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.props.api.profiles.get({id:id});case 2:profileData=_context7.sent;profile=profileData.body().data().data;this.setState({profile:_objectSpread(_objectSpread({},this.state.profile),{},{parentUuid:profile.uuid}),parentProfile:profile});case 5:case "end":return _context7.stop();}}},_callee7,this);}));function fetchTeam(_x7){return _fetchTeam4.apply(this,arguments);}
return fetchTeam;}()},{key:"render",value:function render(){var defaultProps=this.props;var props=_objectSpread(_objectSpread({},defaultProps),this.props.getValues());var steps=[];if(props.enableExerciseGoal){steps.push(ExerciseGoalForm);}
steps.push(UserForm);steps.push(ProfileForm);if(props.enableRego||props.enableDonation){steps.push(PaymentForm);}
steps.push(CompleteForm);return React.createElement(MultiForm,_objectSpread(_objectSpread({name:"signup-form",variant:"signup-form--v2",promptOnLeave:"Leaving this page will require you to re-enter your information. Are you sure you want to leave?"},props),{},{values:this.state,updateValues:this.updateValues,steps:steps,error:this.state.error}));}}]);return CustomSignupForm;}(React.Component),_temp4;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":7},"enableRego":{"type":"boolean","label":"Enable Registration Fee","value":false},"enableTeams":{"type":"boolean","label":"Enable teams","value":true},"accountTitle":{"type":"text","group":"headings","label":"Account Form Title","value":"Your Account"},"profileTitle":{"type":"text","group":"headings","label":"Profile Form Title","value":"Your Profile"},"teamLanguage":{"type":"text","group":"language","label":"Team Language","value":"Team"},"accountButton":{"type":"text","group":"buttons","label":"Account Form Button","value":"Continue"},"exerciseGoals":{"type":"repeater","group":"exercise","label":"Exercise goals","value":[{"value":30,"description":"Lorem Ipsum"}],"options":[{"id":"value","type":"number","label":"Goal Amount (km, hours or miles)","defaultValue":""},{"id":"description","type":"text","label":"Goal Description","defaultValue":""}]},"exerciseTitle":{"type":"text","group":"headings","label":"Exercise Goal Form Title","value":"Choose your activity goal"},"paymentButton":{"help":"You can use {amount} to dynamically insert the donation amount 🤯","type":"text","group":"buttons","label":"Payment Button","value":"Donate {amount} and complete Sign Up"},"completeButton":{"type":"text","group":"buttons","label":"Complete Button","value":"Sign Up"},"enableDonation":{"type":"boolean","label":"Enable Self Donation","value":true},"enableFacebook":{"type":"boolean","label":"Enable Facebook signup","value":true},"passwordLength":{"type":"number","group":"advanced","label":"Minimum Password length","value":6},"showTitleIcons":{"type":"boolean","group":"headings","label":"Show Heading Icons","value":true},"joinButtonTitle":{"type":"text","group":"language","label":"Join a Team Button"},"profileLanguage":{"type":"text","group":"language","label":"Profile Language","value":"Profile"},"teamButtonTitle":{"type":"text","group":"language","label":"Start a Team Button"},"avoidDefaultNames":{"help":"Avoid generating profile and team names automatically","type":"boolean","group":"advanced","label":"Disable automatic naming","value":false},"enableExerciseGoal":{"help":"You can set your activity types and units in <a target=\"_blank\" href=\"../setup/activity\">Activity Settings</a>.","type":"boolean","group":"exercise","label":"Enable exercise goal step","value":false},"registrationAmount":{"type":"currency","group":"fees","label":"Registration Fee","value":5000},"exerciseDescription":{"type":"text","group":"language","label":"Exercise Goal Description","value":"Choose a goal from the list below"},"paymentDonationTitle":{"type":"text","group":"headings","label":"Donation Title","value":"Kickstart your Fundraising"},"joinButtonDescription":{"type":"text","group":"language","label":"Join a Team Description","value":""},"teamButtonDescription":{"type":"text","group":"language","label":"Start a Team Description","value":""},"registrationAmountField":{"help":"Advanced: Enter a field ID if you would like to set a dynamic fee based on that field.","type":"text","group":"fees","label":"Registration Fee Field","value":""},"paymentRegistrationTitle":{"type":"text","group":"headings","label":"Registration Fee Title","value":"Pay the Registration Fee"},"alphabeticalProfileSearch":{"help":"Order Team search results alphabetically instead of by total","type":"boolean","group":"advanced","label":"Sort Teams Alphabetically","value":false}},"customComponent":"firefighter-vip-form"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"firefighter-vip-form");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='donation-counter-variation';var component=function component(RaiselyComponents){var _temp5;return _temp5=function(_React$Component9){_inherits(MyRaiselyComponent,_React$Component9);var _super9=_createSuper(MyRaiselyComponent);function MyRaiselyComponent(){var _this11;_classCallCheck(this,MyRaiselyComponent);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}
_this11=_super9.call.apply(_super9,[this].concat(args));_defineProperty(_assertThisInitialized(_this11),"state",{count:0});return _this11;}
_createClass(MyRaiselyComponent,[{key:"componentDidMount",value:function(){var _componentDidMount=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var _this$props5,api,global,donations,body;return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this$props5=this.props,api=_this$props5.api,global=_this$props5.global;_context8.next=3;return api.donations.getAll({query:{campaign:global.campaign.uuid}});case 3:donations=_context8.sent;_context8.next=6;return donations.body();case 6:body=_context8.sent;this.setState({count:body.data().pagination.total});case 8:case "end":return _context8.stop();}}},_callee8,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}
return componentDidMount;}()},{key:"render",value:function render(){var values=this.props.getValues();var customTotal=this.state.count+(Number(values.bonus)||0);return React.createElement("h2",{className:"counter-numerals",style:{'text-align':'center',color:'inherit'}},customTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,','));}}]);return MyRaiselyComponent;}(React.Component),_temp5;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"bonus":{"id":"bonus","type":"text","label":"Bonus Starting Variant","value":"0","singular":null},"version":{"type":"number","label":"Current Version of Component","value":5}},"customComponent":"donation-counter-variation"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"donation-counter-variation");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='participant-counter-variation';var component=function component(RaiselyComponents){var _temp6;return _temp6=function(_React$Component10){_inherits(MyRaiselyComponent,_React$Component10);var _super10=_createSuper(MyRaiselyComponent);function MyRaiselyComponent(){var _this12;_classCallCheck(this,MyRaiselyComponent);for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}
_this12=_super10.call.apply(_super10,[this].concat(args));_defineProperty(_assertThisInitialized(_this12),"state",{count:0});return _this12;}
_createClass(MyRaiselyComponent,[{key:"componentDidMount",value:function(){var _componentDidMount2=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var _this$props6,api,global,profiles,body;return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this$props6=this.props,api=_this$props6.api,global=_this$props6.global;_context9.next=3;return api.profiles.getAll({query:{campaign:global.campaign.uuid,type:'INDIVIDUAL'}});case 3:profiles=_context9.sent;_context9.next=6;return profiles.body();case 6:body=_context9.sent;this.setState({count:body.data().pagination.total});case 8:case "end":return _context9.stop();}}},_callee9,this);}));function componentDidMount(){return _componentDidMount2.apply(this,arguments);}
return componentDidMount;}()},{key:"render",value:function render(){var values=this.props.getValues();var customTotal=this.state.count+(Number(values.bonus)||0);return React.createElement("h2",{className:"counter-numerals",style:{'text-align':'center',color:'inherit'}},customTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,','));}}]);return MyRaiselyComponent;}(React.Component),_temp6;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"bonus":{"id":"bonus","type":"text","label":"Bonus Starting Variant","value":"0","singular":null},"version":{"type":"number","label":"Current Version of Component","value":5}},"customComponent":"participant-counter-variation"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"participant-counter-variation");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='firefighter-stats';var component=function component(RaiselyComponents){var _temp7;var styled=RaiselyComponents.styled;var Table=styled('table')(_templateObject5());return _temp7=function(_React$Component11){_inherits(MyRaiselyComponent,_React$Component11);var _super11=_createSuper(MyRaiselyComponent);function MyRaiselyComponent(){var _this13;_classCallCheck(this,MyRaiselyComponent);for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++){args[_key6]=arguments[_key6];}
_this13=_super11.call.apply(_super11,[this].concat(args));_defineProperty(_assertThisInitialized(_this13),"state",{total:'Loading...',yesBaKit:'Loading...',noBaKit:'Loading...',donned:'Loading...',donnedStarted:'Loading...',steel:'Loading...',rural:'Loading...'});return _this13;}
_createClass(MyRaiselyComponent,[{key:"componentDidMount",value:function(){var _componentDidMount3=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){var profilesRes,profiles,baKitsRes,baKits,donned,donnedStarted,steel,rural;return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL",limit:1}});case 2:profilesRes=_context10.sent;profiles=profilesRes.body().data();_context10.next=6;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL","public.doYouNeedToBorrowABaSet":"Yes",limit:1}});case 6:baKitsRes=_context10.sent;baKits=baKitsRes.body().data();_context10.next=10;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL","public.categoryBorrowSet":"Donned",limit:1}});case 10:donned=_context10.sent.body().data();_context10.next=13;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL","public.categoryBorrowSet":"Donned & started",limit:1}});case 13:donnedStarted=_context10.sent.body().data();_context10.next=16;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL","public.categoryBorrowSet":"Firefighter of steel - donned only",limit:1}});case 16:steel=_context10.sent.body().data();_context10.next=19;return this.props.api.profiles.getAll({query:{type:"INDIVIDUAL","public.categoryBorrowSet":"Rural - packs provided",limit:1}});case 19:rural=_context10.sent.body().data();console.log(steel);this.setState({total:profiles.pagination.total,yesBaKit:baKits.pagination.total,noBaKit:profiles.pagination.total-baKits.pagination.total,donned:donned.pagination.total,donnedStarted:donnedStarted.pagination.total,steel:steel.pagination.total,rural:rural.pagination.total});case 22:case "end":return _context10.stop();}}},_callee10,this);}));function componentDidMount(){return _componentDidMount3.apply(this,arguments);}
return componentDidMount;}()},{key:"render",value:function render(){var values=this.props.getValues();return React.createElement(Table,null,React.createElement("tr",null,React.createElement("th",null,"Total registrations"),React.createElement("td",null,this.state.total)),React.createElement("tr",null,React.createElement("th",null,"Yes BA set"),React.createElement("td",null,this.state.yesBaKit)),React.createElement("tr",null,React.createElement("th",null,"No BA set"),React.createElement("td",null,this.state.noBaKit)),React.createElement("tr",null,React.createElement("th",null,"Donned BA set"),React.createElement("td",null,this.state.donned)),React.createElement("tr",null,React.createElement("th",null,"Donned & started BA set"),React.createElement("td",null,this.state.donnedStarted)),React.createElement("tr",null,React.createElement("th",null,"Firefighter of steel - donned only BA set"),React.createElement("td",null,this.state.steel)),React.createElement("tr",null,React.createElement("th",null,"Rural - packs provided BA set"),React.createElement("td",null,this.state.rural)));}}]);return MyRaiselyComponent;}(React.Component),_temp7;};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":25}},"customComponent":"firefighter-stats"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"firefighter-stats");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='day-countdown-clock';var component=function component(RaiselyComponents){var _RaiselyComponents$Co5=RaiselyComponents.Common,dayjs=_RaiselyComponents$Co5.dayjs,displayCurrency=_RaiselyComponents$Co5.displayCurrency,get=_RaiselyComponents$Co5.get;return function countDown(props){var countDownMessageBefore=props.getValues().countDownMessageBefore;var countDownMessageAfter=props.getValues().countDownMessageAfter;var countdownDate=props.getValues().timeToEnd;var daysLeft=dayjs(countdownDate).diff(dayjs(),"days")+1;var percentage=Math.round((365-daysLeft)/365*100);var diff=100-percentage;if(daysLeft<0)return null;return React.createElement("div",{className:"countDownClock"},React.createElement("div",null,React.createElement("h4",null,countDownMessageBefore),React.createElement("div",{"class":"svg-item"},React.createElement("svg",{width:"70%",height:"100%",viewBox:"0 0 40 40","class":"donut"},React.createElement("circle",{"class":"donut-hole",cx:"20",cy:"20",r:"15.91549430918954",fill:"#fff"}),React.createElement("circle",{"class":"donut-ring",cx:"20",cy:"20",r:"15.91549430918954",fill:"transparent","stroke-width":"3.5"}),React.createElement("circle",{"class":"donut-segment donut-segment-2",cx:"20",cy:"20",r:"15.91549430918954",fill:"transparent","stroke-width":"3.5","stroke-dasharray":"".concat(percentage," ").concat(diff),"stroke-dashoffset":"25"}),React.createElement("g",{"class":"donut-text donut-text-1"},React.createElement("text",{y:"50%",transform:"translate(0, 2)"},React.createElement("tspan",{x:"50%","text-anchor":"middle","class":"donut-percent"},daysLeft)),React.createElement("text",{y:"60%",transform:"translate(0, 2)"},React.createElement("tspan",{x:"50%","text-anchor":"middle","class":"donut-data"},countDownMessageAfter)))))));};};;var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":12},"timeToEnd":{"id":"timeToEnd","type":"text","label":"Date to countdown to (YYYY-MM-DD)","value":"2021-05-22","singular":null},"countDownMessageAfter":{"id":"countDownMessageAfter","type":"text","label":"Message after","value":"Days","singular":null},"countDownMessageBefore":{"id":"countDownMessageBefore","type":"text","label":"Message before","value":"Event starts in","singular":null}},"customComponent":"day-countdown-clock"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"day-countdown-clock");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='org-donation-test';var component=function component(RaiselyComponents){var DonationTile=RaiselyComponents.Atoms.DonationTile;var DonationStream=RaiselyComponents.Molecules.DonationStream;var CustomFieldsProvider=RaiselyComponents.Modules.CustomFieldsProvider;function resolveProfileFromGlobal(global){if(global.campaign.mock){return global.user.profile;}
if(global.current.profile){return global.current.profile;}
return global.campaign.profile;}
return function CustomDonationStream(props){var global=props.global;var config={isUser:false,direction:'vertical',limit:10};var profile=resolveProfileFromGlobal(global);var showAsLoading=global.loadingCurrent||!global.userAuthAttempted;var scope={profile:profile,showAsLoading:showAsLoading,campaign:global.campaign,user:global.user,currentProfile:props.global.profile,pollingHash:props.pollingHash};return React.createElement(DonationStream,_extends({},scope,config,{renderDonation:function renderDonation(baseDonation,isLoading){var donation=_objectSpread({},baseDonation);try{if(donation!=undefined){if(donation["public"].donationtype==="AnOrganisation"){donation.firstName=donation["public"].organisationName;donation.lastName=null;}}}catch(err){}
return React.createElement(DonationTile,{donation:donation,campaign:global.campaign,showAsLoading:showAsLoading||isLoading,detail:"basic",user:scope.user});}}));};};var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":3}},"customComponent":"org-donation-test"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"org-donation-test");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='organisation-donation';var component=function component(RaiselyComponents){var DonationTile=RaiselyComponents.Atoms.DonationTile;var DonationStream=RaiselyComponents.Molecules.DonationStream;var CustomFieldsProvider=RaiselyComponents.Modules.CustomFieldsProvider;function resolveProfileFromGlobal(global){if(global.campaign.mock){return global.user.profile;}
if(global.current.profile){return global.current.profile;}
return global.campaign.profile;}
return function CustomDonationStream(props){var global=props.global;var config={isUser:false,direction:'vertical',limit:10};var profile=resolveProfileFromGlobal(global);var showAsLoading=global.loadingCurrent||!global.userAuthAttempted;var scope={profile:profile,showAsLoading:showAsLoading,campaign:global.campaign,user:global.user,currentProfile:props.global.profile,pollingHash:props.pollingHash};return React.createElement(DonationStream,_extends({},scope,config,{renderDonation:function renderDonation(baseDonation,isLoading){var donation=_objectSpread({},baseDonation);try{if(donation!==undefined&&donation["public"]!==undefined&&donation["public"].donationtype!==undefined){if(donation["public"].donationtype==="AnOrganisation"){donation.firstName=donation["public"].organisationName;donation.lastName=null;}}}catch(err){}
return React.createElement(DonationTile,{donation:donation,campaign:global.campaign,showAsLoading:showAsLoading||isLoading,detail:"basic",user:scope.user});}}));};};var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":26}},"customComponent":"organisation-donation"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"organisation-donation");window.buildRaiselyComponent(function(){var React=window.React;var RaiselyComponents=window.RaiselyComponents;var name='step-up-stats';var component=function component(RaiselyComponents){return function(_React$Component12){_inherits(MyRaiselyComponent,_React$Component12);var _super12=_createSuper(MyRaiselyComponent);function MyRaiselyComponent(){_classCallCheck(this,MyRaiselyComponent);return _super12.apply(this,arguments);}
_createClass(MyRaiselyComponent,[{key:"render",value:function render(){var values=this.props.getValues();return React.createElement("h1",null,"This is a boilerplate Raisely custom component");}}]);return MyRaiselyComponent;}(React.Component);};var html=component(RaiselyComponents,React);var schema={"data":{"created":true,"editable":{"version":{"type":"number","label":"Current Version of Component","value":1}},"customComponent":"step-up-stats"},"type":"custom-component","object":"block"};window['CustomComponent'+name]={html:html,name:name,schema:schema};window.RaiselyPrivateComponents.push({status:'PRIVATE',html:html,name:name,latestSchema:schema});},"step-up-stats");